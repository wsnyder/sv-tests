<head>
  <style>
    .log { font-family: "Courier New", Consolas, monospace; font-size: 80%; }
    .test-failed { background-color: #ffaaaa; }
    .test-passed { background-color: #aaffaa; }
  </style>
</head>
<body>
<h3><a href="https://github.com/zachjs/sv2v" target="_blank">zachjs-sv2v</a></h3>
<pre class="test-passed">
description: Tests imported from hdlconv
should_fail: 0
tags: hdlconv
incdirs: /home/travis/build/SymbiFlow/sv-tests/third_party/tests/hdlconvertor/tests/verilog
top_module: 
type: parsing
mode: parsing
files: <a href="../../../../third_party/tests/hdlconvertor/tests/verilog/aes.v.html" target="file-frame">third_party/tests/hdlconvertor/tests/verilog/aes.v</a>
time_elapsed: 0.152s
ram usage: 12604 KB
</pre>
<pre class="log">

module aes_cipher_top (
	clk,
	rst,
	ld,
	done,
	key,
	text_in,
	text_out
);
	input clk;
	input rst;
	input ld;
	output done;
	input [127:0] key;
	input [127:0] text_in;
	output [127:0] text_out;
	wire [31:0] w0;
	wire [31:0] w1;
	wire [31:0] w2;
	wire [31:0] w3;
	reg [127:0] text_in_r;
	reg [127:0] text_out;
	reg [7:0] sa00;
	reg [7:0] sa01;
	reg [7:0] sa02;
	reg [7:0] sa03;
	reg [7:0] sa10;
	reg [7:0] sa11;
	reg [7:0] sa12;
	reg [7:0] sa13;
	reg [7:0] sa20;
	reg [7:0] sa21;
	reg [7:0] sa22;
	reg [7:0] sa23;
	reg [7:0] sa30;
	reg [7:0] sa31;
	reg [7:0] sa32;
	reg [7:0] sa33;
	wire [7:0] sa00_next;
	wire [7:0] sa01_next;
	wire [7:0] sa02_next;
	wire [7:0] sa03_next;
	wire [7:0] sa10_next;
	wire [7:0] sa11_next;
	wire [7:0] sa12_next;
	wire [7:0] sa13_next;
	wire [7:0] sa20_next;
	wire [7:0] sa21_next;
	wire [7:0] sa22_next;
	wire [7:0] sa23_next;
	wire [7:0] sa30_next;
	wire [7:0] sa31_next;
	wire [7:0] sa32_next;
	wire [7:0] sa33_next;
	wire [7:0] sa00_sub;
	wire [7:0] sa01_sub;
	wire [7:0] sa02_sub;
	wire [7:0] sa03_sub;
	wire [7:0] sa10_sub;
	wire [7:0] sa11_sub;
	wire [7:0] sa12_sub;
	wire [7:0] sa13_sub;
	wire [7:0] sa20_sub;
	wire [7:0] sa21_sub;
	wire [7:0] sa22_sub;
	wire [7:0] sa23_sub;
	wire [7:0] sa30_sub;
	wire [7:0] sa31_sub;
	wire [7:0] sa32_sub;
	wire [7:0] sa33_sub;
	wire [7:0] sa00_sr;
	wire [7:0] sa01_sr;
	wire [7:0] sa02_sr;
	wire [7:0] sa03_sr;
	wire [7:0] sa10_sr;
	wire [7:0] sa11_sr;
	wire [7:0] sa12_sr;
	wire [7:0] sa13_sr;
	wire [7:0] sa20_sr;
	wire [7:0] sa21_sr;
	wire [7:0] sa22_sr;
	wire [7:0] sa23_sr;
	wire [7:0] sa30_sr;
	wire [7:0] sa31_sr;
	wire [7:0] sa32_sr;
	wire [7:0] sa33_sr;
	wire [7:0] sa00_mc;
	wire [7:0] sa01_mc;
	wire [7:0] sa02_mc;
	wire [7:0] sa03_mc;
	wire [7:0] sa10_mc;
	wire [7:0] sa11_mc;
	wire [7:0] sa12_mc;
	wire [7:0] sa13_mc;
	wire [7:0] sa20_mc;
	wire [7:0] sa21_mc;
	wire [7:0] sa22_mc;
	wire [7:0] sa23_mc;
	wire [7:0] sa30_mc;
	wire [7:0] sa31_mc;
	wire [7:0] sa32_mc;
	wire [7:0] sa33_mc;
	reg done;
	reg ld_r;
	reg [3:0] dcnt;
	always @(posedge clk)
		if (!rst)
			dcnt &lt;= #(1) 4&#39;h0;
		else if (ld)
			dcnt &lt;= #(1) 4&#39;hb;
		else if (|dcnt)
			dcnt &lt;= #(1) (dcnt - 4&#39;h1);
	always @(posedge clk) done &lt;= #(1) ((!|dcnt[3:1] &amp; dcnt[0]) &amp; !ld);
	always @(posedge clk)
		if (ld)
			text_in_r &lt;= #(1) text_in;
	always @(posedge clk) ld_r &lt;= #(1) ld;
	always @(posedge clk) sa33 &lt;= #(1) (ld_r ? (text_in_r[007:000] ^ w3[07:00]) : sa33_next);
	always @(posedge clk) sa23 &lt;= #(1) (ld_r ? (text_in_r[015:008] ^ w3[15:08]) : sa23_next);
	always @(posedge clk) sa13 &lt;= #(1) (ld_r ? (text_in_r[023:016] ^ w3[23:16]) : sa13_next);
	always @(posedge clk) sa03 &lt;= #(1) (ld_r ? (text_in_r[031:024] ^ w3[31:24]) : sa03_next);
	always @(posedge clk) sa32 &lt;= #(1) (ld_r ? (text_in_r[039:032] ^ w2[07:00]) : sa32_next);
	always @(posedge clk) sa22 &lt;= #(1) (ld_r ? (text_in_r[047:040] ^ w2[15:08]) : sa22_next);
	always @(posedge clk) sa12 &lt;= #(1) (ld_r ? (text_in_r[055:048] ^ w2[23:16]) : sa12_next);
	always @(posedge clk) sa02 &lt;= #(1) (ld_r ? (text_in_r[063:056] ^ w2[31:24]) : sa02_next);
	always @(posedge clk) sa31 &lt;= #(1) (ld_r ? (text_in_r[071:064] ^ w1[07:00]) : sa31_next);
	always @(posedge clk) sa21 &lt;= #(1) (ld_r ? (text_in_r[079:072] ^ w1[15:08]) : sa21_next);
	always @(posedge clk) sa11 &lt;= #(1) (ld_r ? (text_in_r[087:080] ^ w1[23:16]) : sa11_next);
	always @(posedge clk) sa01 &lt;= #(1) (ld_r ? (text_in_r[095:088] ^ w1[31:24]) : sa01_next);
	always @(posedge clk) sa30 &lt;= #(1) (ld_r ? (text_in_r[103:096] ^ w0[07:00]) : sa30_next);
	always @(posedge clk) sa20 &lt;= #(1) (ld_r ? (text_in_r[111:104] ^ w0[15:08]) : sa20_next);
	always @(posedge clk) sa10 &lt;= #(1) (ld_r ? (text_in_r[119:112] ^ w0[23:16]) : sa10_next);
	always @(posedge clk) sa00 &lt;= #(1) (ld_r ? (text_in_r[127:120] ^ w0[31:24]) : sa00_next);
	assign sa00_sr = sa00_sub;
	assign sa01_sr = sa01_sub;
	assign sa02_sr = sa02_sub;
	assign sa03_sr = sa03_sub;
	assign sa10_sr = sa11_sub;
	assign sa11_sr = sa12_sub;
	assign sa12_sr = sa13_sub;
	assign sa13_sr = sa10_sub;
	assign sa20_sr = sa22_sub;
	assign sa21_sr = sa23_sub;
	assign sa22_sr = sa20_sub;
	assign sa23_sr = sa21_sub;
	assign sa30_sr = sa33_sub;
	assign sa31_sr = sa30_sub;
	assign sa32_sr = sa31_sub;
	assign sa33_sr = sa32_sub;
	assign {sa00_mc, sa10_mc, sa20_mc, sa30_mc} = mix_col(sa00_sr, sa10_sr, sa20_sr, sa30_sr);
	assign {sa01_mc, sa11_mc, sa21_mc, sa31_mc} = mix_col(sa01_sr, sa11_sr, sa21_sr, sa31_sr);
	assign {sa02_mc, sa12_mc, sa22_mc, sa32_mc} = mix_col(sa02_sr, sa12_sr, sa22_sr, sa32_sr);
	assign {sa03_mc, sa13_mc, sa23_mc, sa33_mc} = mix_col(sa03_sr, sa13_sr, sa23_sr, sa33_sr);
	assign sa00_next = (sa00_mc ^ w0[31:24]);
	assign sa01_next = (sa01_mc ^ w1[31:24]);
	assign sa02_next = (sa02_mc ^ w2[31:24]);
	assign sa03_next = (sa03_mc ^ w3[31:24]);
	assign sa10_next = (sa10_mc ^ w0[23:16]);
	assign sa11_next = (sa11_mc ^ w1[23:16]);
	assign sa12_next = (sa12_mc ^ w2[23:16]);
	assign sa13_next = (sa13_mc ^ w3[23:16]);
	assign sa20_next = (sa20_mc ^ w0[15:08]);
	assign sa21_next = (sa21_mc ^ w1[15:08]);
	assign sa22_next = (sa22_mc ^ w2[15:08]);
	assign sa23_next = (sa23_mc ^ w3[15:08]);
	assign sa30_next = (sa30_mc ^ w0[07:00]);
	assign sa31_next = (sa31_mc ^ w1[07:00]);
	assign sa32_next = (sa32_mc ^ w2[07:00]);
	assign sa33_next = (sa33_mc ^ w3[07:00]);
	always @(posedge clk) text_out[127:120] &lt;= #(1) (sa00_sr ^ w0[31:24]);
	always @(posedge clk) text_out[095:088] &lt;= #(1) (sa01_sr ^ w1[31:24]);
	always @(posedge clk) text_out[063:056] &lt;= #(1) (sa02_sr ^ w2[31:24]);
	always @(posedge clk) text_out[031:024] &lt;= #(1) (sa03_sr ^ w3[31:24]);
	always @(posedge clk) text_out[119:112] &lt;= #(1) (sa10_sr ^ w0[23:16]);
	always @(posedge clk) text_out[087:080] &lt;= #(1) (sa11_sr ^ w1[23:16]);
	always @(posedge clk) text_out[055:048] &lt;= #(1) (sa12_sr ^ w2[23:16]);
	always @(posedge clk) text_out[023:016] &lt;= #(1) (sa13_sr ^ w3[23:16]);
	always @(posedge clk) text_out[111:104] &lt;= #(1) (sa20_sr ^ w0[15:08]);
	always @(posedge clk) text_out[079:072] &lt;= #(1) (sa21_sr ^ w1[15:08]);
	always @(posedge clk) text_out[047:040] &lt;= #(1) (sa22_sr ^ w2[15:08]);
	always @(posedge clk) text_out[015:008] &lt;= #(1) (sa23_sr ^ w3[15:08]);
	always @(posedge clk) text_out[103:096] &lt;= #(1) (sa30_sr ^ w0[07:00]);
	always @(posedge clk) text_out[071:064] &lt;= #(1) (sa31_sr ^ w1[07:00]);
	always @(posedge clk) text_out[039:032] &lt;= #(1) (sa32_sr ^ w2[07:00]);
	always @(posedge clk) text_out[007:000] &lt;= #(1) (sa33_sr ^ w3[07:00]);
	function [31:0] mix_col;
		input reg [7:0] s0;
		input reg [7:0] s1;
		input reg [7:0] s2;
		input reg [7:0] s3;
		reg [7:0] s0_o;
		reg [7:0] s1_o;
		reg [7:0] s2_o;
		reg [7:0] s3_o;
		begin
			mix_col[31:24] = ((((xtime(s0) ^ xtime(s1)) ^ s1) ^ s2) ^ s3);
			mix_col[23:16] = ((((s0 ^ xtime(s1)) ^ xtime(s2)) ^ s2) ^ s3);
			mix_col[15:08] = ((((s0 ^ s1) ^ xtime(s2)) ^ xtime(s3)) ^ s3);
			mix_col[07:00] = ((((xtime(s0) ^ s0) ^ s1) ^ s2) ^ xtime(s3));
		end
	endfunction
	function [7:0] xtime;
		input reg [7:0] b;
		xtime = ({b[6:0], 1&#39;b0} ^ (8&#39;h1b &amp; {8 {b[7]}}));
	endfunction
	aes_key_expand_128 u0(
		.clk(clk),
		.kld(ld),
		.key(key),
		.wo_0(w0),
		.wo_1(w1),
		.wo_2(w2),
		.wo_3(w3)
	);
	aes_sbox us00(
		.a(sa00),
		.d(sa00_sub)
	);
	aes_sbox us01(
		.a(sa01),
		.d(sa01_sub)
	);
	aes_sbox us02(
		.a(sa02),
		.d(sa02_sub)
	);
	aes_sbox us03(
		.a(sa03),
		.d(sa03_sub)
	);
	aes_sbox us10(
		.a(sa10),
		.d(sa10_sub)
	);
	aes_sbox us11(
		.a(sa11),
		.d(sa11_sub)
	);
	aes_sbox us12(
		.a(sa12),
		.d(sa12_sub)
	);
	aes_sbox us13(
		.a(sa13),
		.d(sa13_sub)
	);
	aes_sbox us20(
		.a(sa20),
		.d(sa20_sub)
	);
	aes_sbox us21(
		.a(sa21),
		.d(sa21_sub)
	);
	aes_sbox us22(
		.a(sa22),
		.d(sa22_sub)
	);
	aes_sbox us23(
		.a(sa23),
		.d(sa23_sub)
	);
	aes_sbox us30(
		.a(sa30),
		.d(sa30_sub)
	);
	aes_sbox us31(
		.a(sa31),
		.d(sa31_sub)
	);
	aes_sbox us32(
		.a(sa32),
		.d(sa32_sub)
	);
	aes_sbox us33(
		.a(sa33),
		.d(sa33_sub)
	);
endmodule

</pre>
</body>