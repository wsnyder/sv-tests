<head>
  <style>
    .log { font-family: "Courier New", Consolas, monospace; font-size: 80%; }
    .test-failed { background-color: #ffaaaa; }
    .test-passed { background-color: #aaffaa; }
  </style>
</head>
<body>
<h3><a href="https://github.com/zachjs/sv2v" target="_blank">zachjs-sv2v</a></h3>
<pre class="test-passed">
description: Tests imported from yosys
should_fail: 0
tags: yosys
incdirs: /home/travis/build/SymbiFlow/sv-tests/third_party/tools/yosys/tests/simple
top_module: 
files: <a href="../../../../third_party/tools/yosys/tests/simple/task_func.v.html" target="file-frame">third_party/tools/yosys/tests/simple/task_func.v</a>
time_elapsed: 0.095s
</pre>
<pre class="log">

module task_func_test01 (
	clk,
	a,
	b,
	c,
	x,
	y,
	z,
	w
);
	input clk;
	input [7:0] a;
	input [7:0] b;
	input [7:0] c;
	output reg [7:0] x;
	output reg [7:0] y;
	output reg [7:0] z;
	output wire [7:0] w;
	function [7:0] sum_shift;
		input reg [3:0] s1;
		input reg [3:0] s2;
		input reg [3:0] s3;
		sum_shift = ((s1 + (s2 &lt;&lt; 2)) + (s3 &lt;&lt; 4));
	endfunction
	task reset_w;
		
		w = 0;
	endtask
	task add_to;
		output [7:0] out;
		input reg [7:0] in;
		out = (out + in);
	endtask
	always @(posedge clk) begin
		x = sum_shift(a, b, c);
		y = sum_shift(a[7:4], b[5:2], c[3:0]);
		z = (sum_shift(a[0], b[5:4], (c &gt;&gt; 5)) ^ sum_shift(1, 2, 3));
		reset_w;
		add_to(w, x);
		add_to(w, y);
		add_to(w, z);
	end
endmodule
module task_func_test02 (
	clk,
	a,
	b,
	c,
	x,
	y,
	z,
	w
);
	input clk;
	input [7:0] a;
	input [7:0] b;
	input [7:0] c;
	output reg [7:0] x;
	output reg [7:0] y;
	output reg [7:0] z;
	output wire [7:0] w;
	function [7:0] sum_shift;
		input reg [3:0] s1;
		input reg [3:0] s2;
		input reg [3:0] s3;
		sum_shift = ((s1 + (s2 &lt;&lt; 2)) + (s3 &lt;&lt; 4));
	endfunction
	task reset_w;
		
		w = 0;
	endtask
	task add_to;
		output [7:0] out;
		input reg [7:0] in;
		out = (out + in);
	endtask
	always @(posedge clk) begin
		x = sum_shift(a, b, c);
		y = sum_shift(a[7:4], b[5:2], c[3:0]);
		z = (sum_shift(a[0], b[5:4], (c &gt;&gt; 5)) ^ sum_shift(1, 2, 3));
		reset_w;
		add_to(w, x);
		add_to(w, y);
		add_to(w, z);
	end
endmodule
module task_func_test03 (
	din_a,
	din_b,
	dout_a
);
	input [7:0] din_a;
	input [7:0] din_b;
	output [7:0] dout_a;
	assign dout_a = test(din_a, din_b);
	function [7:0] test;
		input reg [7:0] a;
		input reg [7:0] b;
		begin : TEST
			integer i;
			for (i = 0; (i &lt;= 7); i = (i + 1))
				test[i] = (a[i] &amp; b[i]);
		end
	endfunction
endmodule
module task_func_test04 (
	in,
	out1,
	out2,
	out3,
	out4
);
	input [7:0] in;
	output [7:0] out1;
	output [7:0] out2;
	output [7:0] out3;
	output [7:0] out4;
	parameter p = 23;
	parameter px = 42;
	function [7:0] test1;
		input reg [7:0] i;
		parameter p = 42;
		test1 = (i + p);
	endfunction
	function [7:0] test2;
		input reg [7:0] i;
		parameter p2 = (p + 42);
		test2 = (i + p2);
	endfunction
	function [7:0] test3;
		input reg [7:0] i;
		test3 = (i + p);
	endfunction
	function [7:0] test4;
		input reg [7:0] i;
		parameter px = (p + 13);
		parameter p3 = (px - 37);
		parameter p4 = (p3 ^ px);
		test4 = (i + p4);
	endfunction
	assign out1 = test1(in);
	assign out2 = test2(in);
	assign out3 = test3(in);
	assign out4 = test4(in);
endmodule
module task_func_test05 (
	data_in,
	data_out,
	clk
);
	output wire data_out;
	input data_in;
	input clk;
	task myTask;
		output out;
		input reg in;
		out = in;
	endtask
	always @(posedge clk)
		myTask(data_out, data_in);
endmodule

</pre>
</body>