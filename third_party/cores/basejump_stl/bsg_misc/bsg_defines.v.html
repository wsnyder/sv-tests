<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="../../../../code.css">
  </head>
  <body>
    third_party/cores/basejump_stl/bsg_misc/bsg_defines.v
    <table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#l-1"> 1</a>
<a href="#l-2"> 2</a>
<a href="#l-3"> 3</a>
<a href="#l-4"> 4</a>
<a href="#l-5"> 5</a>
<a href="#l-6"> 6</a>
<a href="#l-7"> 7</a>
<a href="#l-8"> 8</a>
<a href="#l-9"> 9</a>
<a href="#l-10">10</a>
<a href="#l-11">11</a>
<a href="#l-12">12</a>
<a href="#l-13">13</a>
<a href="#l-14">14</a>
<a href="#l-15">15</a>
<a href="#l-16">16</a>
<a href="#l-17">17</a>
<a href="#l-18">18</a>
<a href="#l-19">19</a>
<a href="#l-20">20</a>
<a href="#l-21">21</a>
<a href="#l-22">22</a>
<a href="#l-23">23</a>
<a href="#l-24">24</a>
<a href="#l-25">25</a>
<a href="#l-26">26</a>
<a href="#l-27">27</a>
<a href="#l-28">28</a>
<a href="#l-29">29</a>
<a href="#l-30">30</a>
<a href="#l-31">31</a>
<a href="#l-32">32</a>
<a href="#l-33">33</a>
<a href="#l-34">34</a>
<a href="#l-35">35</a>
<a href="#l-36">36</a>
<a href="#l-37">37</a>
<a href="#l-38">38</a>
<a href="#l-39">39</a>
<a href="#l-40">40</a>
<a href="#l-41">41</a>
<a href="#l-42">42</a>
<a href="#l-43">43</a>
<a href="#l-44">44</a>
<a href="#l-45">45</a>
<a href="#l-46">46</a>
<a href="#l-47">47</a>
<a href="#l-48">48</a>
<a href="#l-49">49</a>
<a href="#l-50">50</a>
<a href="#l-51">51</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="l-1"></a><span class="no">`ifndef</span> <span class="no">BSG_DEFINES_V</span>
<a name="l-2"></a><span class="cp">`define BSG_DEFINES_V</span>
<a name="l-3"></a>
<a name="l-4"></a><span class="cp">`define BSG_MAX(x,y) (((x)&gt;(y)) ? (x) : (y))</span>
<a name="l-5"></a><span class="cp">`define BSG_MIN(x,y) (((x)&lt;(y)) ? (x) : (y))</span>
<a name="l-6"></a>
<a name="l-7"></a><span class="c1">// maps 1 --&gt; 1 instead of to 0</span>
<a name="l-8"></a><span class="cp">`define BSG_SAFE_CLOG2(x) ( ((x)==1) ? 1 : $clog2((x)))</span>
<a name="l-9"></a><span class="cp">`define BSG_IS_POW2(x) ( (1 &lt;&lt; $clog2(x)) == (x))</span>
<a name="l-10"></a><span class="cp">`define BSG_WIDTH(x) ($clog2(x+1))</span>
<a name="l-11"></a>
<a name="l-12"></a><span class="c1">// calculate ceil(x/y) </span>
<a name="l-13"></a><span class="cp">`define BSG_CDIV(x,y) (((x)+(y)-1)/(y))</span>
<a name="l-14"></a>
<a name="l-15"></a><span class="no">`ifdef</span> <span class="no">SYNTHESIS</span>
<a name="l-16"></a><span class="cp">`define BSG_UNDEFINED_IN_SIM(val) (val)</span>
<a name="l-17"></a><span class="no">`else</span>
<a name="l-18"></a><span class="cp">`define BSG_UNDEFINED_IN_SIM(val) (&#39;X)</span>
<a name="l-19"></a><span class="no">`endif</span>
<a name="l-20"></a>
<a name="l-21"></a><span class="no">`ifdef</span> <span class="no">SYNTHESIS</span>
<a name="l-22"></a><span class="cp">`define BSG_DISCONNECTED_IN_SIM(val) (val)</span>
<a name="l-23"></a><span class="no">`elsif</span> <span class="no">VERILATOR</span>
<a name="l-24"></a><span class="cp">`define BSG_DISCONNECTED_IN_SIM(val) (val)</span>
<a name="l-25"></a><span class="no">`else</span>
<a name="l-26"></a><span class="cp">`define BSG_DISCONNECTED_IN_SIM(val) (&#39;z)</span>
<a name="l-27"></a><span class="no">`endif</span>
<a name="l-28"></a>
<a name="l-29"></a><span class="c1">// using C-style shifts instead of a[i] allows the parameter of BSG_GET_BIT to be a parameter subrange                                                                                                                                                                               </span>
<a name="l-30"></a><span class="c1">// e.g., parameter[4:1][1], which DC 2016.12 does not allow                                                                                                                                                                                                                          </span>
<a name="l-31"></a>
<a name="l-32"></a><span class="cp">`define BSG_GET_BIT(X,NUM) (((X)&gt;&gt;(NUM))&amp;1&#39;b1)</span>
<a name="l-33"></a>
<a name="l-34"></a><span class="c1">// This version of countones works in synthesis, but only up to 64 bits                                                                                                                                                                                                              </span>
<a name="l-35"></a><span class="c1">// we do a funny thing where we propagate X&#39;s in simulation if it is more than 64 bits                                                                                                                                                                                               </span>
<a name="l-36"></a><span class="c1">// and in synthesis, go ahead and ignore the high bits                                                                                                                                                                      </span>
<a name="l-37"></a>
<a name="l-38"></a><span class="cp">`define BSG_COUNTONES_SYNTH(y) (($bits(y) &lt; 65) ? 1&#39;b0 : `BSG_UNDEFINED_IN_SIM(1&#39;b0)) + (`BSG_GET_BIT(y,0) +`BSG_GET_BIT(y,1) +`BSG_GET_BIT(y,2) +`BSG_GET_BIT(y,3) +`BSG_GET_BIT(y,4) +`BSG_GET_BIT(y,5) +`BSG_GET_BIT(y,6)+`BSG_GET_BIT(y,7) +`BSG_GET_BIT(y,8)+`BSG_GET_BIT(y,9) \</span>
<a name="l-39"></a><span class="cp">                                                                                       +`BSG_GET_BIT(y,10)+`BSG_GET_BIT(y,11)+`BSG_GET_BIT(y,12)+`BSG_GET_BIT(y,13)+`BSG_GET_BIT(y,14)+`BSG_GET_BIT(y,15)+`BSG_GET_BIT(y,16)+`BSG_GET_BIT(y,17)+`BSG_GET_BIT(y,18)+`BSG_GET_BIT(y,19) \</span>
<a name="l-40"></a><span class="cp">                                                                                       +`BSG_GET_BIT(y,20)+`BSG_GET_BIT(y,21)+`BSG_GET_BIT(y,22)+`BSG_GET_BIT(y,23)+`BSG_GET_BIT(y,24)+`BSG_GET_BIT(y,25)+`BSG_GET_BIT(y,26)+`BSG_GET_BIT(y,27)+`BSG_GET_BIT(y,28)+`BSG_GET_BIT(y,29) \</span>
<a name="l-41"></a><span class="cp">                                                                                       +`BSG_GET_BIT(y,30)+`BSG_GET_BIT(y,31)+`BSG_GET_BIT(y,32)+`BSG_GET_BIT(y,33)+`BSG_GET_BIT(y,34)+`BSG_GET_BIT(y,35)+`BSG_GET_BIT(y,36)+`BSG_GET_BIT(y,37)+`BSG_GET_BIT(y,38)+`BSG_GET_BIT(y,39) \</span>
<a name="l-42"></a><span class="cp">                                                                                       +`BSG_GET_BIT(y,40)+`BSG_GET_BIT(y,41)+`BSG_GET_BIT(y,42)+`BSG_GET_BIT(y,43)+`BSG_GET_BIT(y,44)+`BSG_GET_BIT(y,45)+`BSG_GET_BIT(y,46)+`BSG_GET_BIT(y,47)+`BSG_GET_BIT(y,48)+`BSG_GET_BIT(y,49) \</span>
<a name="l-43"></a><span class="cp">                                                                                       +`BSG_GET_BIT(y,50)+`BSG_GET_BIT(y,51)+`BSG_GET_BIT(y,52)+`BSG_GET_BIT(y,53)+`BSG_GET_BIT(y,54)+`BSG_GET_BIT(y,55)+`BSG_GET_BIT(y,56)+`BSG_GET_BIT(y,57)+`BSG_GET_BIT(y,58)+`BSG_GET_BIT(y,59) \</span>
<a name="l-44"></a><span class="cp">                                                                                       +`BSG_GET_BIT(y,60)+`BSG_GET_BIT(y,61)+`BSG_GET_BIT(y,62)+`BSG_GET_BIT(y,63))</span>
<a name="l-45"></a>
<a name="l-46"></a><span class="c1">// nullify rpgroups</span>
<a name="l-47"></a><span class="no">`ifndef</span> <span class="n">rpgroup</span>
<a name="l-48"></a><span class="cp">`define rpgroup(x)</span>
<a name="l-49"></a><span class="no">`endif</span>
<a name="l-50"></a>
<a name="l-51"></a><span class="no">`endif</span>
</pre></div>
</td></tr></table>
  </body>
</html>